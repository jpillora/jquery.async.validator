/** jQuery Asynchronous Validator - v0.0.1 - 2013/02/26
 * https://github.com/jpillora/jquery.async.validator
 * Copyright (c) 2013 Jaime Pillora - MIT
 */(function(e,t,i){function n(e,t,n,r){function s(){v("ajax error"),n.callback("There has been an error")}function a(){c.prompt(d,!1);for(var e=o.loading[p];e.length;)e.pop().success.apply(t,arguments);o.loaded[p]=arguments}var l={method:"GET",timeout:15e3},d=n.triggerField||n.field,h=e.success,f=e.error,c=r.options,p=JSON?JSON.stringify(e):u(),g={success:h,error:f||s};if(o.loaded[p]){var m=o.loaded[p],y=g.success;return y.apply(t,m),i}if(o.loading[p]||(o.loading[p]=[]),o.loading[p].push(g),1===o.loading[p].length){c.prompt(d,"Checking...","load");var x={success:a,error:a};$.ajax($.extend(l,e,x))}}function r(e){$.extend(!0,this,e)}function s(e){l("field",e)}function a(e){l("group",e)}function l(e,t){for(var i in t)j[e][i]&&y("validator '%s' already exists",i);$.extend(!0,j[e],t)}(function(t){function n(){this.suppressLog||a("log",this,arguments)}function r(){a("warn",this,arguments)}function s(){a("info",this,arguments)}function a(n,r,s){if(e.console!==i&&e.console.isFake!==!0){var a=t.map(s,d);a[0]=[r.prefix,a[0],r.postfix].join("");var l="boolean"===t.type(a[a.length-1])?a.pop():null;l===!0&&e.console.group(a[0]),a[0]&&null===l&&(e.navigator.userAgent.indexOf("MSIE")>=0?e.console.log(a.join(",")):e.console[n].apply(e.console,a)),l===!1&&e.console.groupEnd()}}function l(e){return{log:function(){n.apply(e,arguments)},warn:function(){r.apply(e,arguments)},info:function(){s.apply(e,arguments)}}}e.console===i&&(e.console={isFake:!0});for(var o=["log","warn","info","group","groupCollapsed","groupEnd"],u=o.length-1;u>=0;u--)e.console[o[u]]===i&&(e.console[o[u]]=t.noop);if(t){var d=function(e){return e},h=function(e){return e=t.extend({},h.defaults,e),l(e)};h.defaults={suppressLog:!1,prefix:"",postfix:""},t.extend(h,l(h.defaults)),t.console===i&&(t.console=h),t.consoleNoConflict=h}})(jQuery);var o={loading:{},loaded:{}},u=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};$.fn.scrollView=function(e){var t=$(this).first();return 1===t.length&&(t.is(".styled")&&(t=t.siblings("span")),$("html, body").animate({scrollTop:Math.max(0,t.offset().top-100)},{duration:1e3,complete:e||$.noop})),$(this)},$.fn.equals=function(e){if($(this).length!==e.length)return!1;for(var t=0,i=$(this).length;i>t;++t)if($(this)[t]!==e[t])return!1;return!0},$.Deferred.serialize=function(e){if(!$.isArray(e)||0===e.length)return $.Deferred().resolve().promise();for(var t=e[0](),i=1,n=e.length;n>i;i++)t=t.pipe(e[i]);return t},$.Deferred.parallelize=function(e){function t(e){r++,r===a&&n.resolve(e)}function i(e){l||(l=!0,n.reject(e))}var n=$.Deferred(),r=0,s=0,a=e.length,l=!1;if(!$.isArray(e)||0===a)return n.resolve();for(;a>s;++s)e[s]().done(t).fail(i);return n.promise()};var d=function(){var e=function(t){var i=t.split(""),n="",r=!1,s="",a=!1,l=0,o={};for(var u in i){var d=i[u];if(!r){if("("==d){r=!0,o[n]=[];continue}" "!=d&&(n+=d)}r&&!a&&("("==d?(s+=d,l++):")"==d&&l>0?(s+=d,s&&o[n].push(e(s)),s="",l--):")"==d&&0==l?(s&&o[n].push(s),a=!0):","==d&&0==l?(s&&o[n].push(s),s=""):s+=d)}return o};return{parse:e}}(),h=null;(function(){var e=!1,t=/xyz/.test(function(){})?/\b_super\b/:/.*/;h=function(){},h.extend=function(i){function n(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;e=!0;var s=new this;e=!1;for(var a in i)s[a]="function"==typeof i[a]&&"function"==typeof r[a]&&t.test(i[a])?function(e,t){return function(){var i=this._super;this._super=r[e];var n=t.apply(this,arguments);return this._super=i,n}}(a,i[a]):i[a];return n.prototype=s,n.prototype.constructor=n,n.extend=arguments.callee,n}})();var f=h.extend({init:function(e,t){this.name=t?t:"Set_"+u(),this.array=[],this.addAll(e)},find:function(e){for(var t=0,i=this.array.length;i>t;++t)if($.isFunction(e)?e(this.get(t)):this.equals(this.get(t),e))return this.get(t);return null},get:function(e){return this.array[e]},has:function(e){return!!this.find(e)},add:function(e){return this.has(e)?!1:(this.array.push(e),!0)},addAll:function(e){if(!e)return 0;$.isArray(e)||(e=[e]);for(var t=0,i=0,n=e.length;n>i;++i)this.add(e[i])&&t++;return t},remove:function(e){for(var t=[],i=0,n=this.array.length;n>i;++i)this.equals(this.get(i),e)||t.push(this.get(i));return this.array=t,e},removeAll:function(){this.array=[]},equals:function(e,t){return e&&t&&e.equals!==i&&t.equals!==i?e.equals(t):e===t},each:function(e){for(var t=0,i=this.array.length;i>t;++t)e(this.get(t))},map:function(e){return $.map(this.array,e)},filter:function(e){return $.grep(this.array,e)},size:function(){return this.array.length},getArray:function(){return this.array}}),c=f.extend({init:function(e,t,i){this.type=e,this._super(t,i)},add:function(e){e instanceof this.type?this._super(e):this.log("add failed - invalid type")}}),p={appendArg:function(e,t,i){i||(i=0);var n=[].slice.call(e,i);return n[i]=t+n[i],n},memoize:function(e,t){var i={};return function(){var n=t?t.apply(this,arguments):Array.prototype.join.call(arguments,"|");return Object.prototype.hasOwnProperty.call(i,n)?i[n]:i[n]=e.apply(this,arguments)}},dateToString:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},parseDate:function(e){var t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(!t)return null;var n;if($.datepicker!==i)try{var r=$.datepicker.parseDate("dd/mm/yy",e);n=new Date(r)}catch(s){return null}else n=new Date(parseInt(t[3],10),parseInt(t[2],10)-1,parseInt(t[1],10));return n},isRTL:function(e){var i=$(t),n=$("body"),r=e&&e.hasClass("rtl")||e&&"rtl"===(e.attr("dir")||"").toLowerCase()||i.hasClass("rtl")||"rtl"===(i.attr("dir")||"").toLowerCase()||n.hasClass("rtl")||"rtl"===(n.attr("dir")||"").toLowerCase();return Boolean(r)}},g="0.0.1",m=$.consoleNoConflict({prefix:"asyncValidator: "}),v=m.log,y=m.warn,x=m.info,b={debug:!1,validateAttribute:"data-validate",validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,hideErrorOnChange:!1,skipHiddenFields:!0,errorClass:"error",errorContainer:function(e){return e},onValidationComplete:function(e,t){return t},track:$.noop,prompt:function(e,t,i){"function"===$.type($.prompt)&&$.prompt(e,t,i)}};r.prototype=b;var w=h.extend({name:"Class",init:function(){},toString:function(){return(this.type?this.type+": ":"")+(this.name?this.name+": ":"")},log:function(){b.debug&&v.apply(this,p.appendArg(arguments,""+this))},warn:function(){y.apply(this,p.appendArg(arguments,""+this))},info:function(){x.apply(this,p.appendArg(arguments,""+this))},bind:function(e){var t=this[e];t&&$.isFunction(t)&&(this[e]=$.proxy(t,this))},bindAll:function(){for(var e in this)this.bind(e)}}),F=w.extend({init:function(e,t,i){this.name=t,this.type=e,this.buildFn(i)},buildFn:function(e){if($.isFunction(e))return this.fn=e,this.userObj=null,this.ready=!0,i;if(!$.isPlainObject(e))return this.warn("rule definition must be a function or an object");for(this.userObj=$.extend(!0,{},e);"string"===$.type(this.userObj.extend);){var t=this.userObj.extend.match(/^((\w+):)?(\w+)$/),n=t[2]||this.type,r=t[3];if(delete this.userObj.extend,!j[n])return this.warn("cannot extend type: '"+n+"'");var s=j[n][r];if(this.userObj===s)return this.warn("cannot extend self");if(!$.isPlainObject(s))return this.warn("cannot extend: '"+r+"'");this.userObj=$.extend(!0,{},s,this.userObj)}if($.isFunction(this.userObj.fn))this.fn=this.userObj.fn,delete this.userObj.fn;else{if("regexp"!==$.type(this.userObj.regex))return this.warn("rule definition lacks a function");this.fn=function(e){return function(t){var i=RegExp(e);return t.val().match(i)?!0:t.message||"Invalid Format"}}(this.userObj.regex),delete this.userObj.regex}this.ready=!0},defaultInterface:{log:v,warn:y},defaultFieldInterface:{val:function(){return this.field.val.apply(this.field,arguments)}},defaultGroupInterface:{fields:function(e){return this.field.find(e||"input,select")}},buildInterface:function(e){var t=[];return t.push({}),t.push(this.userObj),t.push(this.defaultInterface),"field"===this.type&&t.push(this.defaultFieldInterface),"group"===this.type&&t.push(this.defaultGroupInterface),t.push(e),$.extend.apply(this,t)}}),j={field:{},group:{}},E=null;(function(){var e=p.memoize(d.parse),t=p.memoize(function(e,t){if("field"!==e&&"group"!==e)return y("invalid rule type: '"+e+"'");var i=j[e][t];return i?new F(e,t,i):y("missing '"+e+"' rule '"+t+"'")});E=function(i){var n=!1,r=null,s=[];if("ValidationGroup"===i.type)r="group";else{if("ValidationField"!==i.type)return y("cannot get rules from invalid type");r="field"}if(!i.elem)return s;var a=i.form.options.validateAttribute,l=i.elem.attr(a);if(!l)return s;var o=e("x("+l+")").x;if(!o)return s;for(var u=0,d=o.length;d>u;++u){var h=null,f=[],c=o[u];if(!c)return y("cannot execute null rule");if("string"===$.type(c))h=c;else{if(!$.isPlainObject(c))return y('cannot execute rule of type "'+$.type(c)+'"');for(var p in c){if(h)return y("rule object should only contain 1 key");h=p}if(!h)return y("rule object should contain 1 key");if(f=c[h],!$.isArray(f))return y("invalid rule params type - must be array")}h=$.trim(h),"required"===h&&(n=!0);var g=t(r,h);g&&s.push({rule:g,params:f})}return s.required=n,s}})();var A=null;(function(){var e=w.extend({type:"ValidationElement",init:function(e){return this.bindAll(),this.elem=e,this.setName(),this.executions=[],!e.length||e.data("asyncValidator")?!1:(e&&e.data("asyncValidator",this),!0)},setName:function(){var e=null;this.elem&&(e=this.elem.attr("name")||this.elem.attr("id")),e||(e=u()),this.name=e},equals:function(t){var i,n;return this.elem?(i=this.elem,t.jquery?n=t:t instanceof e&&t.elem&&(n=t.elem),i&&n?i.equals(n):!1):!1},print:function(){function t(t){t instanceof e&&t.print()}this instanceof n&&this.log(">");for(var r in this){var s=this[r];s instanceof f&&(this.log(r+" #"+s.size(),!0),s.each(t),this.log(i,!1))}}}),n=e.extend({type:"ValidationField",init:function(e,t){this._super(e)&&(this.form=t,this.options=t.options,this.ruleNames=null,this.fieldset=null)},validate:function(e){var t=new V(this);return t.execute().always(e),i}}),s=e.extend({type:"ValidationGroup",nongroup:!1,init:function(e,t){this._super(e),e&&e.jquery&&(e.length||(this.nongroup=!0,this.name+="_nongroup"),this.form=t,this.options=t.options,this.fields=new c(n))}});A=e.extend({type:"ValidationForm",init:function(e,a){e.length&&e.is("form")&&this._super(e)&&(this.options=new r(a),this.fields=new c(n),this.fieldsets=new c(s),this.fieldByName={},this.invalidFields={},this.fieldHistory={},this.submitResult=i,this.submitPending=!1,this.cache={ruleNames:{},ajax:{loading:{},loaded:{}}},$(t).ready(this.bindEvents))},extendOptions:function(e){$.extend(!0,this.options,e)},bindEvents:function(){this.elem.on("keyup.jqv","input",this.onKeyup).on("blur.jqv","input[type=text]:not(.hasDatepicker),input:not([type].hasDatepicker)",this.onValidate).on("change.jqv","input[type=text].hasDatepicker",this.onValidate).on("change.jqv","select,[type=checkbox],[type=radio]",this.onValidate).on("submit.jqv",this.onSubmit).on("validated.jqv",this.scrollFocus).trigger("initialised.jqv"),this.updateFields(),this.log("bound to "+this.fields.size()+" elems")},unbindEvents:function(){this.elem.off(".jqv")},updateFields:function(){var e="["+this.options.validateAttribute+"]";this.elem.find(e).each(this.updateField)},updateField:function(e,t){e.jquery!==i&&(t=e),t.jquery===i&&(t=$(t));var r,a,l,o,u="input:not([type=hidden]),select,textarea";return t.is(u)?a=t:o=t,a&&(r=this.fields.find(a),r||(r=new n(a,this),this.fields.add(r)),o=a.parentsUntil(this.elem,"["+this.options.validateAttribute+"]:first")),l=this.fieldsets.find(o),l||(l=new s(o,this),this.fieldsets.add(l)),r?(l.fields.add(r),r.fieldset=l):o.find(u).each(this.updateField),r},onSubmit:function(e){var t=!1;if(this.submitPending&&this.warn("pending..."),this.submitPending||this.submitResult!==i)this.submitResult!==i&&(t=this.options.onValidationComplete(e,this.submitResult));else{this.submitPending=!0;var n=this;this.validate(function(e){n.submitPending=!1,n.submitResult=!e,n.elem.submit(),n.submitResult=i})}return t||e.preventDefault(),t},onKeyup:function(e){this.options.hideErrorOnChange&&this.options.prompt($(e.currentTarget),!1)},onValidate:function(e){var t=$(e.currentTarget),i=t.data("asyncValidator")||this.updateField(t);i.log("validate"),i.validate($.noop)},validate:function(e){this.updateFields();var t=new k(this);return t.execute().always(e),i},scrollFocus:function(){var e=this.executions[this.executions.length-1];if(e.errors.length){var t=e.errors[0].field,i=this.options.focusFirstField&&t.is("input[type=text]");this.options.scroll?t.scrollView(function(){i&&t.focus()}):i&&t.focus()}}})})();var k=null,V=null;(function(){var e=w.extend({STATUS:{NOT_STARTED:0,RUNNING:1,COMPLETE:2},init:function(e,t){this.element=e,e&&(e.executions.push(this),this.domElem=e.elem),this.parent=t,this.name=u(),this.status=this.STATUS.NOT_STARTED,this.errors=[],this.bindAll()},toString:function(){return this._super()+(""+(this.element||this.rule))},serialize:function(e){return $.Deferred.serialize($.map(e,function(e){return $.isFunction(e)?e:e.execute}))},parallelize:function(e){return $.Deferred.parallelize($.map(e,function(e){return $.isFunction(e)?e:e.execute}))},execute:function(){this.log("execute",!0),this.status=this.STATUS.RUNNING},executed:function(e){this.log("",!1),this.log("done: "+e),this.status=this.STATUS.COMPLETE},skipValidations:function(){return this.element.form.options.skipHiddenFields&&(!this.domElem.hasClass("styled")&&this.domElem.is(":hidden")||this.domElem.hasClass("styled")&&this.domElem.parents(":hidden").length>0)?!0:this.domElem.is("[disabled]")?!0:!1}});k=e.extend({type:"FormExecution",init:function(e){this._super(e),this.ajaxs=[];var i=this;this.executables=[],this.element.fieldsets.map(function(e){i.executables.push(new t(e,i))})},execute:function(){return this._super(),this.log("exec groups #"+this.executables.length),this.domElem.triggerHandler("validating"),this.parallelize(this.executables).always(this.executed)},executed:function(e){this._super(e),this.element.log("result: "+(e===i?"Passed":"Failed: "+e)),this.domElem.triggerHandler("validated",arguments)}});var t=e.extend({type:"GroupExecution",init:function(e,t){this._super(e,t)},execute:function(){if(this._super(),this.skipValidations())return $.Deferred().always(this.executed).resolve().promise();this.log("getting group rules");var e=E(this.element),t=$.map(e,$.proxy(function(e){return new r(e,this)},this));this.beforeRules=[],this.afterRules=[];for(var i=0,n=t.length;n>i;++i){var s=t[i];s.rule.userObj&&"after"===s.rule.userObj.run?this.afterRules.push(s):this.beforeRules.push(s)}if(this.parent instanceof V&&0===this.afterRules.length){var a=this.parent;a.group=this,this.fields=[a]}else this.fields=this.element.fields.map($.proxy(function(e){return new V(e,this)},this));this.log("exec");var l=[];return this.beforeRules.length>0&&l.push(this.execBefore),l.push(this.execFields),this.afterRules.length>0&&l.push(this.execAfter),this.serialize(l).always(this.executed)},execBefore:function(){return this.log("before rules #%s",this.beforeRules.length),this.serialize(this.beforeRules).always(this.executedBefore)},execFields:function(){return this.log("exec fields #%s",this.fields.length),this.parallelize(this.fields).always(this.executedFields)},execAfter:function(){return this.log("after rules #%s",this.afterRules.length),this.serialize(this.afterRules).always(this.executedAfter)},executedBefore:function(e){this.executedBeforeAfter(e)},executedFields:function(){},executedAfter:function(e){this.executedBeforeAfter(e)},executedBeforeAfter:function(e){var t=!!e,i=this.element.form.options;this.element.fields.each(function(e){i.prompt(e.elem,!1),i.errorClass&&i.errorContainer(e.elem).toggleClass(i.errorClass,t)});var n=this.triggerField();n||(n=this.element.fields.array[0]&&this.element.fields.array[0].elem),n&&i.prompt(n,e),this.parent instanceof V&&this.parent.element.options.track("Validate Group",this.parent.element.name+";"+(this.domElem.attr(i.validateAttribute)||"non_group"),t?e:"Valid",t?0:1)},executed:function(e){this._super()},triggerField:function(){return this.parent instanceof V?this.parent.domElem:null}});V=e.extend({type:"FieldExecution",init:function(e,i){this._super(e,i),this.children=[],i instanceof t&&(this.group=i)},execute:function(){if(this._super(),this.skip=!0,!this.group&&this.element.fieldset.nongroup===!1)return this.log("redirect to group exec: "+this.element.name),this.group=new t(this.element.fieldset,this),this.group.execute().always(function(){v("",!1)});this.domElem.triggerHandler("validating");var e=E(this.element),i=null;if(this.skipValidations())this.log("skip");else if(e.required||$.trim(this.domElem.val()))if($.isArray(e)&&e.length){var n=this,s=$.map(e,function(e){return new r(e,n)});this.log("exec rules #%s",s.length),i=this.serialize(s),this.skip=!1}else this.log("no validators");else this.log("not required");return this.skip===!0&&(i=$.Deferred(),i.resolve()),i.always(this.executed),i.promise()},executed:function(e){this._super(e),this.log("validated");var t=!!e,i=this.element.form.options;i.prompt(this.domElem,e),this.domElem.triggerHandler("validated",[e]),i.errorClass&&i.errorContainer(this.domElem).toggleClass(i.errorClass,t);var n=this.parent,r=n&&n.parent,s=null,a=!1;t&&r&&r instanceof k&&this.parent.parent.errors.push({message:e,field:this.domElem}),n&&(s=n.triggerField()),a=s?s.equals(this.domElem):!0,a&&(!n||n.parent instanceof V)&&this.element.options.track("Validate Field",this.element.form.name+" "+this.element.name,t?e:this.skip?"Skip":"Valid",t?0:1)}});var r=e.extend({type:"RuleExecution",init:function(e,t){this._super(null,t),this.rule=e.rule,this.params=e.params,this.validationElem=this.parent.element,this.options=this.validationElem.options},execute:function(){this._super();var e=$.Deferred(),r=this.rule,s=this;e.always(this.executed);var a=0,l=function(t){if(clearTimeout(u),a++,s.log("callback #"+a+" with: "+t),!(a>1)){var n=t===i||t===!0;n?e.resolve():e.reject(t)}},o=this.validationElem;if(!o||!r.ready)return this.warn(o?"not ready.":"invalid parent."),l(),e.promise();this.log("run");var u=setTimeout(function(){s.warn("timeout!"),l("Timeout")},1e4),d={};this.parent instanceof t&&(d.triggerField=this.parent.triggerField()),d.field=o.elem,d.form=o.form.elem,d.callback=l,d.params=this.params,d.args=this.params,d.ajax=function(e){n(e,r,d,o)};var h=r.buildInterface(d),f=r.fn(h);return f!==i&&l(f),e.promise()}})})(),$.fn.validate=function(e){var t=$(this).data("asyncValidator");t?t.validate(e):y("element does not have async validator attached")},$.fn.validate.version=g,$.fn.asyncValidator=function(e){return this.each(function(){var t=$.asyncValidator.forms.find($(this));return e===!1||"destroy"===e?(t&&(t.unbindEvents(),$.asyncValidator.forms.remove(t)),i):(t?t.extendOptions(e):(t=new A($(this),e),$.asyncValidator.forms.add(t)),i)})},$.asyncValidator=function(e){$.extend(b,e)},$.extend($.asyncValidator,{version:g,addRules:s,addFieldRules:s,addGroupRules:a,log:x,warn:y,defaults:b,globals:b,utils:p,forms:new c(A,[],"FormSet")}),$(function(){$("form").filter(function(){return $(this).find("["+b.validateAttribute+"]").length>0}).asyncValidator()}),v("plugin added."),function(t){return t.asyncValidator===i?(e.alert("Please include jquery.async.validator.js before each rule file"),i):(t.asyncValidator.addFieldRules({currency:{regex:/^\$?\d+(,\d+)*(\.\d+)?$/,message:"Invalid monetary value"},email:{regex:/^(([^<>()\[\]\\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:"Invalid email address"},alphanumeric:{regex:/^[0-9A-Za-z]+$/,message:"Use digits and letters only"},street_number:{regex:/^\d+[A-Za-z]?(-\d+)?[A-Za-z]?$/,message:"Street Number only"},number:{regex:/^\d+$/,message:"Use digits only"},numberSpace:{regex:/^[\d\ ]+$/,message:"Use digits and spaces only"},postcode:{regex:/^\d{4}$/,message:"Invalid postcode"},date:{fn:function(e){return t.asyncValidator.utils.parseDate(e.val())?!0:e.message},message:"Invalid date"},required:{fn:function(e){return e.requiredField(e,e.field)},requiredField:function(e,i){var n=i.val();switch(i.prop("type")){case"radio":case"checkbox":var r=i.attr("name");if(0===e.form.find("input[name='"+r+"']:checked").size())return 1===e.form.find("input[name='"+r+"']").size()?e.messages.checkboxSingle:e.messages.checkboxMultiple;break;default:if(!t.trim(n))return e.messages.all}return!0},messages:{all:"This field is required",checkboxMultiple:"Please select an option",checkboxSingle:"This checkbox is required"}},regex:{fn:function(e){var t;try{var i=e.args[0];t=RegExp(i)}catch(n){return e.warn("Invalid regex: "+i),!0}return e.val().match(t)?!0:e.message||"Invalid Format"},message:"Invalid format"},asyncTest:function(e){e.prompt("Please wait..."),setTimeout(function(){e.callback()},2e3)},phone:function(e){e.val(e.val().replace(/\D/g,""));var t=e.val();return t.match(/^[\d\s]+$/)?t.match(/^0/)?10!==t.replace(/\s/g,"").length?"Must be 10 digits long":!0:"Number must start with 0":"Use digits and spaces only"},size:function(e){var t=e.val(),n=e.args[0],r=e.args[1];if(n!==i&&r===i){var s=parseInt(n,10);if(e.val().length!==s)return"Must be "+s+" characters"}else if(n!==i&&r!==i){var a=parseInt(n,10);if(r=parseInt(r,10),a>t.length||t.length>r)return"Must be between "+a+" and "+r+" characters"}else console.log("size validator parameter error on field: "+e.field.attr("name"));return!0},min:function(e){var t=e.val(),i=parseInt(e.args[0],10);return i>t.length?"Must be at least "+i+" characters":!0},max:function(e){var t=e.val(),i=parseInt(e.args[0],10);return t.length>i?"Must be at most "+i+" characters":!0},decimal:function(e){var t=e.val(),i=e.args[0]?parseInt(e.args[0],10):2;if(!t.match(/^\d+(,\d{3})*(\.\d+)?$/))return"Invalid decimal value";var n=parseFloat(t.replace(/[^\d\.]/g,"")),r=Math.pow(10,i);return n=Math.round(n*r)/r,e.field.val(n),!0},min_val:function(e){var t=parseFloat(e.val().replace(/[^\d\.]/g,"")),i=e.args[1]||"",n=parseFloat(e.args[0]);return n>t?"Must be greater than "+n+i:!0},max_val:function(e){var t=parseFloat(e.val().replace(/[^\d\.]/g,"")),i=e.args[1]||"",n=parseFloat(e.args[0]);return t>n?"Must be less than "+n+i:!0},range_val:function(e){var t=parseFloat(e.val().replace(/[^\d\.]/g,"")),i=e.args[2]||"",n=e.args[3]||"",r=parseFloat(e.args[0]),s=parseFloat(e.args[1]);return t>s||r>t?"Must be between "+i+r+n+"\nand "+i+s+n:!0},agreement:function(e){return e.field.is(":checked")?!0:"You must agree to continue"},minAge:function(e){var i=e.args[0];if(!i||isNaN(parseInt(i,10)))return console.log("WARNING: Invalid Age Param: "+i),!0;new Date;var n=new Date;n.setFullYear(n.getFullYear()-parseInt(i,10));var r=t.asyncValidator.utils.parseDate(e.val());return"Invalid Date"===r?"Invalid Date":r>n?"You must be at least "+i:!0}}),t.asyncValidator.addGroupRules({required:{run:"before",extend:"field:required",fn:function(e){var i=!0;return e.fields().each(function(){i===!0&&(i=e.requiredField(e,t(this)))}),i}},dateRange:{run:"after",fn:function(e){var i=e.fields("[data-date=start]"),n=e.fields("[data-date=end]");if(0===i.length||0===n.length)return e.warn("Missing dateRange fields, skipping..."),!0;var r=t.asyncValidator.utils.parseDate(i.val());if(!r)return"Invalid Start Date";var s=t.asyncValidator.utils.parseDate(n.val());return s?r>=s?"Start Date must come before End Date":!0:"Invalid End Date"}},min_checks:{run:"before",fn:function(e){var t=e.fields("input[type=checkbox]:checked"),i=parseInt(e.args[0],10);return i>t.length?"You must choose at least "+(1===i?"one":i):!0}}}),i)}(jQuery)})(window,document);