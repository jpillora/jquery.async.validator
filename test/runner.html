
<html>
  <head>
    <title>Mocha - jQuery Validation Engine Tests</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="lib/mocha.css" />
    <script type="text/javascript" src="lib/jquery.js"></script>
    <script type="text/javascript" src="lib/mocha.js"></script>
    <script type="text/javascript" src="lib/chai.js"></script>
    <script type="text/javascript" src="lib/coffee-script.min.js"></script>

    <!--  source files ... -->
    <script type="text/javascript" src="../dist/jquery.async.validator.js"></script>

    <script type="text/javascript">


      mocha.setup('bdd');

      console.info("Enter file");


      afterEach(function() {
        $("#konacha").empty();
      })

      var initScripts = {};

      var expect = chai.expect;
      var should = chai.should();

      var assert = function(expr, msg) {
        if (!expr) throw new Error(msg || 'failed');
      }

      $(function() {

        "use strict";

        //define test names
        var demosLoaded = 0;
        var demos = [
          'tests/ajax_spec.js.coffee',
          'tests/basic_spec.js.coffee',
          'tests/extending_spec.js.coffee',
          'tests/group-adv_spec.js.coffee',
          'tests/group-ajax_spec.js.coffee',
          'tests/group-simple_spec.js.coffee',
          'tests/validators_spec.js.coffee'
        ];

        //load each test
        console.log("Begin loading tests...");
        $.each(demos, function(i,url) {

          var evalResult = function(result) {

            console.log("Loaded test: " + url);
            var ext = url.substr(url.lastIndexOf('.')+1);

            switch(ext) {
              case "coffee":
                CoffeeScript.eval(result);
                break;
              case "js":
                eval(result);
                break;
              case "html":
                $('body').append(result);
                break;
              default:
                console.warn("Unsupported file: " + url);
            }

            if((++demosLoaded) === demos.length)
              setTimeout( function() {
                mocha.run();
              },500);
        
            
          };

          $.ajax({ 
            type:'GET', 
            url: url,
            success: evalResult
          });

        });

      });
    </script>

  </head>
  <body>
    <div id="mocha"></div>
    <div id="konacha"></div>
  </body>
</html>
