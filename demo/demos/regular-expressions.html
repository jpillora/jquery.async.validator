<div data-demo>
  <form id="regexDemo">
    <input name="field" value="abc" data-validate="regex(^ab+c$)">
    <input class="submit" type="submit"/>
  </form>
</div>

<script data-demo type="text/javascript">
  $("form#regexDemo").asyncValidator();
</script>


<script data-test type="text/javascript">if(window.mocha) (function(){ //@ sourceURL=regex-tests.js
  describe("Regex validations ", function() {

    var elem = $('form#regexDemo');
    //prevent default submission
    elem.on('submit', function(e) { e.preventDefault(); return false; });

    describe("On submission", function() {
      //valid test
      it("should be valid", function(done) {
        elem.on('validated', function(e,result) {
          expect(result).to.be.undefined;
          done();
          elem.off('validated');
        });
        elem.submit();
      });

      //invalid test
      it("should be invalid", function(done) {
        elem.find('input:first').val('def');
        elem.on('validated', function(e,result) {
          expect(result).to.be.a('string');
          done();
          elem.off('validated');
        });
        elem.submit();
      });

      //valid test
      it("should be valid", function(done) {
        elem.find('input:first').val('abbbbbbbbbbc');
        elem.on('validated', function(e,result) {
          expect(result).to.be.undefined;
          done();
          elem.off('validated');
        });
        elem.submit();
      });

      after(function() {
        var cont = elem.parent();
        cont.next().remove();cont.remove();
      });

    });

  });
})();</script>